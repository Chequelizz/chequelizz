ðŸ”„ **HTML Edit Mode** - Processing your edit request...

Here are the specific SEARCH/REPLACE diffs to simplify the checklist:

1. First, update the task representation:

```html
```diff
<<<<<<< SEARCH
            taskBoxes: {
                'My Tasks': {
                    tasks: [
                        {
                            id: 1,
                            name: 'Complete project proposal',
                            completed: true,
                            dueDate: '2023-06-15',
                            priority: 'high',
                            createdAt: new Date().toISOString()
                        },
=======
            taskBoxes: {
                'Work Tasks': {
                    tasks: [
                        {
                            id: 1,
                            name: 'Send quarterly report',
                            completed: false,
                            dueDate: formatDate(new Date()),
                            priority: 'high',
                            createdAt: new Date().toISOString()
                        },
>>>>>>> REPLACE
`
```
``

2. Update the checklist item styling:

```html
```diff
<<<<<<< SEARCH
                                <span class="flex-1 font-medium line-through text-gray-500">
                                    Complete project proposal
                                    <span class="block text-xs text-gray-400">Completed today</span>
                                </span>
=======
                                <span class="flex-1 font-medium">
                                    Send quarterly report
                                    <span class="block text-xs text-purple-500 uppercase font-semibold mt-1">HIGH PRIORITY</span>
                                </span>
>>>>>>> REPLACE
`
```
``

3. Update the add task modal:

```html
```diff
<<<<<<< SEARCH
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">What needs to be done?</label>
                        <input type="text" id="taskNameInput" class="w-full border rounded-lg p-3" placeholder="Enter task name">
                    </div>
=======
                <div class="space-y-4">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <label class="block text-sm font-medium text-blue-700 mb-2">New Task</label>
                        <input type="text" id="taskNameInput" class="w-full border border-blue-200 bg-white rounded-lg p-3 focus:ring-2 focus:ring-blue-500" placeholder="What needs to be done?">
                    </div>
>>>>>>> REPLACE
`
```
``

4. Update priority buttons:

```html
```diff
<<<<<<< SEARCH
                        <div class="flex gap-2">
                            <button class="priority-btn px-3 py-1 rounded-full text-sm bg-gray-100 hover:bg-gray-200" data-priority="low">Low</button>
                            <button class="priority-btn px-3 py-1 rounded-full text-sm bg-blue-100 hover:bg-blue-200" data-priority="medium">Medium</button>
                            <button class="priority-btn px-3 py-1 rounded-full text-sm bg-red-100 hover:bg-red-200" data-priority="high">High</button>
                        </div>
=======
                        <div class="flex gap-3">
                            <button class="priority-btn px-4 py-2 rounded-lg text-sm font-medium bg-gray-100 hover:bg-gray-200 border border-gray-200" data-priority="low">
                                <span class="w-3 h-3 bg-gray-400 rounded-full inline-block mr-2"></span>
                                Low
                            </button>
                            <button class="priority-btn px-4 py-2 rounded-lg text-sm font-medium bg-blue-100 hover:bg-blue-200 border border-blue-200" data-priority="medium">
                                <span class="w-3 h-3 bg-blue-500 rounded-full inline-block mr-2"></span>
                                Medium
                            </button>
                            <button class="priority-btn px-4 py-2 rounded-lg text-sm font-medium bg-red-100 hover:bg-red-200 border border-red-200" data-priority="high">
                                <span class="w-3 h-3 bg-red-500 rounded-full inline-block mr-2"></span>
                                High
                            </button>
                        </div>
>>>>>>> REPLACE
```
```


5. Add date formatting helper function:

```html
```diff
<<<<<<< SEARCH
        // Initialize the app
        function init() {
=======
        // Helper function to format dates
        function formatDate(date) {
            return date.toLocaleDateString('en-US', { 
                weekday: 'short', 
                month: 'short', 
                day: 'numeric' 
            });
        }

        // Initialize the app
        function init() {
>>>>>>> REPLACE
```


```
These changes will:
1. Make priority levels more visually distinct
2. Improve the task entry form
3. Simplify the date display 
4. Make the UI more intuitive
5. Remove unnecessary complexity while keeping functionality

Would you like me to make any other specific changes to the checklist functionality?Here is the updated HTML content after applying above edits:

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generative AI Checklist Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .level-slider {
            -webkit-appearance: none;
            height: 8px;
            background: #e2e8f0;
            border-radius: 5px;
            background-image: linear-gradient(#4f46e5, #4f46e5);
            background-repeat: no-repeat;
        }
        .level-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
            box-shadow: 0 0 2px 0 #555;
        }
        .level-slider::-webkit-slider-thumb:hover {
            background: #4338ca;
        }
        .task-item {
            transition: all 0.3s ease;
        }
        .task-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .completed-task {
            opacity: 0.7;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto p-4">
        <!-- Header -->
        <header class="bg-white rounded-lg shadow-md p-6 mb-6 flex justify-between items-center">
            <div>
                <h1 class="text-3xl font-bold text-indigo-600">Generative AI Checklist Manager</h1>
                <p class="text-gray-600">Create and manage customizable checklists</p>
            </div>
            <div class="flex space-x-2">
                <button id="settingsBtn" class="bg-indigo-100 text-indigo-700 px-4 py-2 rounded-md hover:bg-indigo-200 transition">
                    Settings
                </button>
                <button id="uploadTemplateBtn" class="bg-purple-100 text-purple-700 px-4 py-2 rounded-md hover:bg-purple-200 transition">
                    Upload Template
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <div class="flex flex-col lg:flex-row gap-6">
            <!-- Left Sidebar - Templates -->
            <div class="w-full lg:w-1/4 bg-white rounded-lg shadow-md p-4 h-fit">
                <h2 class="text-xl font-semibold mb-4 text-gray-800">Templates</h2>
                <div id="templateList" class="space-y-2 mb-4">
                    <div class="p-3 bg-gray-100 rounded-md">Default Template</div>
                </div>
                <button id="addTemplateBtn" class="w-full bg-green-100 text-green-700 px-4 py-2 rounded-md hover:bg-green-200 transition mb-4">
                    Add New Template
                </button>
                <button id="uploadTemplateBtn2" class="w-full bg-blue-100 text-blue-700 px-4 py-2 rounded-md hover:bg-blue-200 transition">
                    Upload Template
                </button>
            </div>

            <!-- Center - TaskBox -->
            <div class="w-full lg:w-2/4 bg-white rounded-lg shadow-md p-4 h-fit">
                <div class="flex justify-between items-center mb-4">
                    <h2 id="currentTaskBoxName" class="text-xl font-semibold text-gray-800">Default TaskBox</h2>
                    <div class="flex space-x-2">
                        <select id="sortSelect" class="border rounded-md p-2">
                            <option value="alphabetical">Sort: A-Z</option>
                            <option value="date">Sort: Date</option>
                            <option value="custom">Sort: Custom</option>
                        </select>
                        <button id="addTaskBtn" class="bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition">
                            Add Task
                        </button>
                    </div>
                </div>
                <div id="taskBox" class="space-y-3">
                    <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                        <div class="flex items-start gap-3">
                            <input type="checkbox" class="mt-1 w-5 h-5 rounded border-gray-300 text-indigo-600">
                            <div class="flex-1">
                                <div class="font-medium">Review client requirements</div>
                                <div class="mt-1 text-sm text-gray-500">Due: Tomorrow</div>
                            </div>
                            <button class="text-gray-400 hover:text-red-500">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <button id="addTaskBtn" class="w-full flex items-center gap-2 text-indigo-600 p-2 rounded hover:bg-indigo-50">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
                        </svg>
                        Add Task
                    </button>
                </div>
                <button id="addTaskBoxBtn" class="w-full bg-purple-100 text-purple-700 px-4 py-2 rounded-md hover:bg-purple-200 transition mt-4">
                    Add New TaskBox
                </button>
            </div>

            <!-- Right - Checklist View -->
            <div class="w-full lg:w-1/4 bg-white rounded-lg shadow-md p-4 h-fit">
                <h2 class="text-xl font-semibold mb-4 text-gray-800">Checklist</h2>
                <div id="checklistView" class="space-y-2">
                    <div class="bg-white p-4 rounded-lg border border-gray-200">
                        <h3 class="font-medium text-lg mb-3">My Checklist</h3>
                        <div class="space-y-2">
                            <div class="flex items-center gap-2">
                                <input type="checkbox" checked class="w-4 h-4 rounded border-gray-300 text-indigo-600">
                                <span class="flex-1 font-medium">
                                    Send quarterly report
                                    <span class="block text-xs text-purple-500 uppercase font-semibold mt-1">HIGH PRIORITY</span>
                                </span>
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="checkbox" class="w-4 h-4 rounded border-gray-300 text-indigo-600">
                                <span class="flex-1 font-medium">
                                    Client review meeting
                                    <span class="block text-xs text-gray-400">Upcoming: Tomorrow 2PM</span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modals -->
        <!-- Settings Modal -->
        <div id="settingsModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
            <div class="bg-white rounded-lg p-6 w-full max-w-md">
                <h3 class="text-xl font-semibold mb-4">Settings</h3>
                <div class="space-y-4">
                    <div>
                        <h4 class="font-medium mb-2">Default Level Names</h4>
                        <div id="levelNamesContainer" class="space-y-2">
                            <!-- Level name inputs will be added here -->
                        </div>
                    </div>
                    <div>
                        <h4 class="font-medium mb-2">Default Sort Preference</h4>
                        <select id="defaultSortSelect" class="w-full border rounded-md p-2">
                            <option value="alphabetical">Alphabetical</option>
                            <option value="date">Date</option>
                            <option value="custom">Custom</option>
                        </select>
                    </div>
                </div>
                <div class="flex justify-end space-x-2 mt-6">
                    <button id="cancelSettingsBtn" class="px-4 py-2 rounded-md border hover:bg-gray-100">
                        Cancel
                    </button>
                    <button id="saveSettingsBtn" class="px-4 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700">
                        Save
                    </button>
                </div>
            </div>
        </div>

        <!-- Add Task Modal -->
        <div id="taskModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
            <div class="bg-white rounded-lg p-6 w-full max-w-md">
                <h3 class="text-xl font-semibold mb-4">Add New Task</h3>
                <div class="space-y-4">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <label class="block text-sm font-medium text-blue-700 mb-2">New Task</label>
                        <input type="text" id="taskNameInput" class="w-full border border-blue-200 bg-white rounded-lg p-3 focus:ring-2 focus:ring-blue-500" placeholder="What needs to be done?">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Due date</label>
                        <input type="date" id="taskDueDate" class="w-full border rounded-lg p-2">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Priority</label>
                        <div class="flex gap-3">
                            <button class="priority-btn px-4 py-2 rounded-lg text-sm font-medium bg-gray-100 hover:bg-gray-200 border border-gray-200" data-priority="low">
                                <span class="w-3 h-3 bg-gray-400 rounded-full inline-block mr-2"></span>
                                Low
                            </button>
                            <button class="priority-btn px-4 py-2 rounded-lg text-sm font-medium bg-blue-100 hover:bg-blue-200 border border-blue-200" data-priority="medium">
                                <span class="w-3 h-3 bg-blue-500 rounded-full inline-block mr-2"></span>
                                Medium
                            </button>
                            <button class="priority-btn px-4 py-2 rounded-lg text-sm font-medium bg-red-100 hover:bg-red-200 border border-red-200" data-priority="high">
                                <span class="w-3 h-3 bg-red-500 rounded-full inline-block mr-2"></span>
                                High
                            </button>
                        </div>
                    </div>
                </div>
                <div class="flex justify-end space-x-2 mt-6">
                    <button id="cancelTaskBtn" class="px-4 py-2 rounded-md border hover:bg-gray-100">
                        Cancel
                    </button>
                    <button id="saveTaskBtn" class="px-4 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700">
                        Save Task
                    </button>
                </div>
            </div>
        </div>

        <!-- Add TaskBox Modal -->
        <div id="taskBoxModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
            <div class="bg-white rounded-lg p-6 w-full max-w-md">
                <h3 class="text-xl font-semibold mb-4">Add New TaskBox</h3>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">TaskBox Name</label>
                        <input type="text" id="taskBoxNameInput" class="w-full border rounded-md p-2">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Default Level Names (comma separated)</label>
                        <input type="text" id="taskBoxLevelsInput" class="w-full border rounded-md p-2" placeholder="e.g., Priority, Difficulty, Importance">
                    </div>
                </div>
                <div class="flex justify-end space-x-2 mt-6">
                    <button id="cancelTaskBoxBtn" class="px-4 py-2 rounded-md border hover:bg-gray-100">
                        Cancel
                    </button>
                    <button id="saveTaskBoxBtn" class="px-4 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700">
                        Save TaskBox
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simplified App state
        const state = {
            currentTaskBox: 'Default Tasks',
            taskBoxes: {
                'Work Tasks': {
                    tasks: [
                        {
                            id: 1,
                            name: 'Send quarterly report',
                            completed: false,
                            dueDate: formatDate(new Date()),
                            priority: 'high',
                            createdAt: new Date().toISOString()
                        },
                        {
                            id: 2,
                            name: 'Client review meeting', 
                            completed: false,
                            dueDate: '2023-06-16',
                            priority: 'medium',
                            createdAt: new Date().toISOString()
                        }
                    ],
                    sortPreference: 'custom'
                }
            },
            templates: ['Default'],
            nextTaskId: 3
        };

        // DOM Elements
        const elements = {
            taskBox: document.getElementById('taskBox'),
            checklistView: document.getElementById('checklistView'),
            currentTaskBoxName: document.getElementById('currentTaskBoxName'),
            templateList: document.getElementById('templateList'),
            sortSelect: document.getElementById('sortSelect'),
            
            settingsModal: document.getElementById('settingsModal'),
            taskModal: document.getElementById('taskModal'),
            taskBoxModal: document.getElementById('taskBoxModal'),
            
            settingsBtn: document.getElementById('settingsBtn'),
            cancelSettingsBtn: document.getElementById('cancelSettingsBtn'),
            saveSettingsBtn: document.getElementById('saveSettingsBtn'),
            
            addTaskBtn: document.getElementById('addTaskBtn'),
            cancelTaskBtn: document.getElementById('cancelTaskBtn'),
            saveTaskBtn: document.getElementById('saveTaskBtn'),
            
            addTaskBoxBtn: document.getElementById('addTaskBoxBtn'),
            addTemplateBtn: document.getElementById('addTemplateBtn'),
            uploadTemplateBtn: document.getElementById('uploadTemplateBtn'),
            uploadTemplateBtn2: document.getElementById('uploadTemplateBtn2'),
            cancelTaskBoxBtn: document.getElementById('cancelTaskBoxBtn'),
            saveTaskBoxBtn: document.getElementById('saveTaskBoxBtn'),
            
            levelNamesContainer: document.getElementById('levelNamesContainer'),
            taskNameInput: document.getElementById('taskNameInput'),
            taskDescInput: document.getElementById('taskDescInput'),
            taskLevelsContainer: document.getElementById('taskLevelsContainer'),
            taskBoxNameInput: document.getElementById('taskBoxNameInput'),
            taskBoxLevelsInput: document.getElementById('taskBoxLevelsInput'),
            defaultSortSelect: document.getElementById('defaultSortSelect')
        };

        // Helper function to format dates
        function formatDate(date) {
            return date.toLocaleDateString('en-US', { 
                weekday: 'short', 
                month: 'short', 
                day: 'numeric' 
            });
        }

        // Initialize the app
        function init() {
            renderTaskList();
            renderTemplatesList();
            attachEventListeners();
        }

        // Render the task list
        function renderTaskList() {
            const taskBox = state.taskBoxes[state.currentTaskBox];
            if (!taskBox) return;

            elements.currentTaskBoxName.textContent = state.currentTaskBox;
            elements.sortSelect.value = taskBox.sortPreference;
            
            // Clear current tasks
            elements.taskBox.innerHTML = '';
            elements.checklistView.innerHTML = '';
            
            if (taskBox.tasks.length === 0) {
                elements.taskBox.innerHTML = '<p class="text-gray-500 italic">No tasks yet. Click "Add Task" to create one.</p>';
                return;
            }
            
            // Sort tasks
            const sortedTasks = sortTasks(taskBox.tasks, taskBox.sortPreference);
            
            // Render tasks in the TaskBox
            sortedTasks.forEach((task, index) => {
                const taskElement = createTaskElement(task, index);
                elements.taskBox.appendChild(taskElement);
            });
            
            // Render checklist view
            sortedTasks.forEach((task, index) => {
                const checklistItem = createChecklistItem(task, index);
                elements.checklistView.appendChild(checklistItem);
            });
        }

        // Create a task element for the TaskBox
        function createTaskElement(task, index) {
            const taskElement = document.createElement('div');
            taskElement.className = 'task-item bg-gray-50 p-4 rounded-md border border-gray-200';
            taskElement.dataset.index = index;
            
            const titleElement = document.createElement('h3');
            titleElement.className = 'font-medium text-lg mb-2';
            titleElement.textContent = task.name;
            
            const descElement = document.createElement('p');
            descElement.className = 'text-sm text-gray-600 mb-3';
            descElement.textContent = task.description || 'No description';
            
            const levelsElement = document.createElement('div');
            levelsElement.className = 'space-y-2 mb-3';
            
            const taskBox = state.taskBoxes[state.currentTaskBox];
            task.levels.forEach((level, i) => {
                if (i >= taskBox.levelNames.length) return;
                
                const levelContainer = document.createElement('div');
                
                const label = document.createElement('label');
                label.className = 'block text-sm text-gray-700';
                label.textContent = taskBox.levelNames[i] || `Level ${i+1}`;
                label.htmlFor = `level-${index}-${i}`;
                
                const sliderContainer = document.createElement('div');
                sliderContainer.className = 'flex items-center gap-3';
                
                const slider = document.createElement('input');
                slider.type = 'range';
                slider.min = '0';
                slider.max = '100';
                slider.value = level;
                slider.className = 'level-slider flex-1';
                slider.id = `level-${index}-${i}`;
                slider.dataset.taskIndex = index;
                slider.dataset.levelIndex = i;
                
                const valueDisplay = document.createElement('span');
                valueDisplay.className = 'text-sm w-8 text-right';
                valueDisplay.textContent = level;
                
                slider.addEventListener('input', (e) => {
                    const taskIdx = parseInt(e.target.dataset.taskIndex);
                    const levelIdx = parseInt(e.target.dataset.levelIndex);
                    state.taskBoxes[state.currentTaskBox].tasks[taskIdx].levels[levelIdx] = parseInt(e.target.value);
                    valueDisplay.textContent = e.target.value;
                });
                
                sliderContainer.appendChild(slider);
                sliderContainer.appendChild(valueDisplay);
                
                levelContainer.appendChild(label);
                levelContainer.appendChild(sliderContainer);
                levelsElement.appendChild(levelContainer);
            });
            
            const actionsElement = document.createElement('div');
            actionsElement.className = 'flex justify-between items-center';
            
            const deleteBtn = document.createElement('button');
            deleteBtn.className = 'text-red-500 text-sm hover:text-red-700';
            deleteBtn.textContent = 'Delete';
            deleteBtn.addEventListener('click', () => {
                state.taskBoxes[state.currentTaskBox].tasks.splice(index, 1);
                renderTaskList();
            });
            
            actionsElement.appendChild(deleteBtn);
            
            taskElement.appendChild(titleElement);
            taskElement.appendChild(descElement);
            taskElement.appendChild(levelsElement);
            taskElement.appendChild(actionsElement);
            
            return taskElement;
        }

        // Create a checklist item
        function createChecklistItem(task, index) {
            const item = document.createElement('div');
            item.className = 'bg-gray-50 p-3 rounded-md border border-gray-200 flex items-start';
            
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.className = 'mt-1 mr-2';
            checkbox.checked = task.completed || false;
            checkbox.addEventListener('change', () => {
                task.completed = checkbox.checked;
                const taskElement = elements.taskBox.querySelector(`.task-item[data-index="${index}"]`);
                if (taskElement) {
                    taskElement.classList.toggle('completed-task', checkbox.checked);
                    taskElement.style.opacity = checkbox.checked ? '0.7' : '1';
                }
            });
            
            const content = document.createElement('div');
            content.className = 'flex-1';
            
            const title = document.createElement('div');
            title.className = 'font-medium';
            title.textContent = task.name;
            
            const levels = document.createElement('div');
            levels.className = 'flex flex-wrap gap-2 mt-1';
            
            const taskBox = state.taskBoxes[state.currentTaskBox];
            task.levels.forEach((value, i) => {
                if (i >= taskBox.levelNames.length) return;
                
                const level = document.createElement('div');
                level.className = 'text-xs bg-indigo-100 text-indigo-800 px-2 py-1 rounded';
                level.textContent = `${taskBox.levelNames[i]}: ${value}`;
                levels.appendChild(level);
            });
            
            content.appendChild(title);
            content.appendChild(levels);
            
            item.appendChild(checkbox);
            item.appendChild(content);
            
            return item;
        }

        // Sort tasks based on preference
        function sortTasks(tasks, preference) {
            switch (preference) {
                case 'alphabetical':
                    return [...tasks].sort((a, b) => a.name.localeCompare(b.name));
                case 'date':
                    return [...tasks].sort((a, b) => new Date(a.createdAt) - new Date(b.createdAt));
                case 'custom':
                default:
                    return [...tasks];
            }
        }

        // Render templates list
        function renderTemplatesList() {
            elements.templateList.innerHTML = '';
            state.templates.forEach(template => {
                const templateElement = document.createElement('div');
                templateElement.className = 'p-3 bg-gray-100 rounded-md cursor-pointer hover:bg-gray-200 transition';
                templateElement.textContent = template;
                templateElement.addEventListener('click', () => {
                    // In a real app, we would load the template here
                    alert(`Template "${template}" selected (loading functionality would be implemented in production)`);
                });
                elements.templateList.appendChild(templateElement);
            });
        }

        // Show modal for adding a new task
        function showAddTaskModal() {
            // Clear previous inputs
            elements.taskNameInput.value = '';
            elements.taskDescInput.value = '';
            elements.taskLevelsContainer.innerHTML = '';
            
            // Add level sliders
            const taskBox = state.taskBoxes[state.currentTaskBox];
            taskBox.levelNames.forEach((name, i) => {
                const container = document.createElement('div');
                
                const label = document.createElement('label');
                label.className = 'block text-sm text-gray-700 mb-1';
                label.textContent = name;
                
                const slider = document.createElement('input');
                slider.type = 'range';
                slider.min = '0';
                slider.max = '100';
                slider.value = '50';
                slider.className = 'level-slider w-full';
                slider.dataset.levelIndex = i;
                
                container.appendChild(label);
                container.appendChild(slider);
                elements.taskLevelsContainer.appendChild(container);
            });
            
            elements.taskModal.classList.remove('hidden');
        }

        // Save a new task
        function saveNewTask() {
            const name = elements.taskNameInput.value.trim();
            if (!name) {
                alert('Task name is required');
                return;
            }
            
            // Add task to current task box
            const newTask = {
                id: state.nextTaskId++,
                name,
                completed: false,
                createdAt: new Date().toISOString()
            };
            
            state.taskBoxes[state.currentTaskBox].tasks.push(newTask);
            renderTaskList();
            elements.taskModal.classList.add('hidden');
            
            // Clear input
            elements.taskNameInput.value = '';
        }

        // Show modal for adding a new task box
        function showAddTaskBoxModal() {
            elements.taskBoxNameInput.value = '';
            elements.taskBoxLevelsInput.value = state.defaultLevelNames.join(', ');
            elements.taskBoxModal.classList.remove('hidden');
        }

        // Save a new task box
        function saveNewTaskBox() {
            const name = elements.taskBoxNameInput.value.trim();
            if (!name) {
                alert('TaskBox name is required');
                return;
            }
            
            const levelsInput = elements.taskBoxLevelsInput.value.trim();
            const levelNames = levelsInput.split(',').map(item => item.trim()).filter(item => item);
            
            // Ensure we have exactly 8 levels, padding with defaults if needed
            while (levelNames.length < 8) {
                levelNames.push(`Level ${levelNames.length + 1}`);
            }
            
            state.taskBoxes[name] = {
                tasks: [],
                levelNames: levelNames.slice(0, 8),
                sortPreference: 'alphabetical'
            };
            
            state.currentTaskBox = name;
            renderTaskList();
            elements.taskBoxModal.classList.add('hidden');
        }

        // Show settings modal
        function showSettingsModal() {
            elements.levelNamesContainer.innerHTML = '';
            
            // Create inputs for level names
            state.defaultLevelNames.forEach((name, i) => {
                const container = document.createElement('div');
                container.className = 'flex items-center gap-2';
                
                const label = document.createElement('label');
                label.className = 'block text-sm text-gray-700 w-16';
                label.textContent = `Level ${i+1}:`;
                
                const input = document.createElement('input');
                input.type = 'text';
                input.className = 'flex-1 border rounded-md p-2';
                input.value = name;
                input.dataset.levelIndex = i;
                
                container.appendChild(label);
                container.appendChild(input);
                elements.levelNamesContainer.appendChild(container);
            });
            
            elements.defaultSortSelect.value = state.taskBoxes[state.currentTaskBox].sortPreference;
            elements.settingsModal.classList.remove('hidden');
        }

        // Save settings
        function saveSettings() {
            // Update level names
            const inputs = elements.levelNamesContainer.querySelectorAll('input');
            inputs.forEach(input => {
                const index = parseInt(input.dataset.levelIndex);
                state.defaultLevelNames[index] = input.value.trim() || `Level ${index+1}`;
            });
            
            // Update sort preference for current task box
            const taskBox = state.taskBoxes[state.currentTaskBox];
            taskBox.sortPreference = elements.defaultSortSelect.value;
            
            // Update sort dropdown in main view to match
            elements.sortSelect.value = taskBox.sortPreference;
            
            // Re-render with new settings
            renderTaskList();
            elements.settingsModal.classList.add('hidden');
        }

        // Handle sort selection change
        function handleSortChange() {
            const value = elements.sortSelect.value;
            state.taskBoxes[state.currentTaskBox].sortPreference = value;
            renderTaskList();
        }

        // Attach event listeners
        function attachEventListeners() {
            // Buttons
            elements.settingsBtn.addEventListener('click', showSettingsModal);
            elements.cancelSettingsBtn.addEventListener('click', () => elements.settingsModal.classList.add('hidden'));
            elements.saveSettingsBtn.addEventListener('click', saveSettings);
            
            elements.addTaskBtn.addEventListener('click', showAddTaskModal);
            elements.cancelTaskBtn.addEventListener('click', () => elements.taskModal.classList.add('hidden'));
            elements.saveTaskBtn.addEventListener('click', saveNewTask);
            
            elements.addTaskBoxBtn.addEventListener('click', showAddTaskBoxModal);
            elements.cancelTaskBoxBtn.addEventListener('click', () => elements.taskBoxModal.classList.add('hidden'));
            elements.saveTaskBoxBtn.addEventListener('click', saveNewTaskBox);
            
            elements.addTemplateBtn.addEventListener('click', () => {
                const templateName = prompt('Enter template name:');
                if (templateName) {
                    state.templates.push(templateName);
                    renderTemplatesList();
                }
            });
            
            // Both upload buttons do the same thing
            elements.uploadTemplateBtn.addEventListener('click', () => alert('Template upload functionality would be implemented in production'));
            elements.uploadTemplateBtn2.addEventListener('click', () => alert('Template upload functionality would be implemented in production'));
            
            // Sort select
            elements.sortSelect.addEventListener('change', handleSortChange);
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
```